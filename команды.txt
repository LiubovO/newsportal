python manage.py shell
from news.models import *
user1 = User.objects.create_user('Alexander')
user2 = User.objects.create_user('Alice')
author1 = Author.objects.create(user=user1)
author2 = Author.objects.create(user=user2)
cat1 = Category.objects.create(name='Финансы')
cat2 = Category.objects.create(name='Культура')
cat3 = Category.objects.create(name='Политика')
cat4 = Category.objects.create(name='Спорт')
p1 = Post.objects.create(author=author1, title='Заголовок', post_type='NE', text='Содержание новости')
p1.category.add(cat1, cat3)
p2 = Post.objects.create(author=author1, title='Заголовок', post_type='AR', text='Содержание статьи')
p2.category.add(cat2)
p3 = Post.objects.create(author=author2, title='Заголовок', post_type='AR', text='Содержание статьи')
p3.category.add(cat4)
co1 = Comment.objects.create(post=p1, user=user1, text='Комментарий1', rating=0)
co2 = Comment.objects.create(post=p1, user=user2, text='Комментарий2', rating=0)
co3 = Comment.objects.create(post=p2, user=user1, text='Комментарий3', rating=0)
co4 = Comment.objects.create(post=p3, user=user2, text='Комментарий4', rating=0)
p1.like()
p1.like()
p1.like()
p2.like()
p2.dislike()
p3.like()
co1.like()
co2.like()
co2.like()
co3.dislike()
author1.update_rating()
author2.update_rating()
Author.objects.all().order_by('-rating').values('user__username', 'rating').first()
best_post = Post.objects.order_by('-rating')[0]
best_post.created_at
best_post.author.user.username
best_post.rating
best_post.title
best_post.preview()
Comment.objects.filter(post=best_post).values('comment_time', 'user', 'rating', 'text')